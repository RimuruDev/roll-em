# roll'em WebGL и Mac fork

Это форк джем игры **roll'em** от **foX_Void (FoxLight Games)**.  
Я сделал этот репозиторий, чтобы игру можно было запускать не только на Windows и при этом немного улучшить удобство без изменения геймдизайна и баланса.

---

## Онлайн версия и билды

* Играть в браузере на GitHub Pages  
  https://rimurudev.github.io/roll-em/

* Архив всех сборок с версии 0.0.1 по 1.0.5  
  https://github.com/RimuruDev/roll-em/releases/tag/Builds_from_0.0.1_to_1.0.5

* Последний релиз форка v1.1.0 Windows и WebGL  
  https://github.com/RimuruDev/roll-em/releases/tag/v1.1.0-win-release

---

## Оригинальная игра и автор

Оригинальная версия игры создана **foX_Void (FoxLight Games)** для геймджема.

* GitHub  
  https://github.com/FoxVoid-501  

* Itch.io  
  https://foxlght.itch.io/  

* Страница игры на Itch  
  https://foxlght.itch.io/rollem  

* Telegram канал  
  https://t.me/foxloft_exe  

* YouTube канал  
  https://www.youtube.com/channel/UCGJUAWVDb7yl-GQUEK8piKw  

Исходный репозиторий игры  
https://github.com/FoxVoid-501/roll-em  

Код, арт, идея и дизайн принадлежат **foX_Void**.  
Этот репозиторий неофициальный технический порт, сделанный по просьбе игроков, которым удобен формат WebGL.

---

## Задачи форка

### Платформы и запуск

* Добавлена поддержка **WebGL**  
* Игра запускается на **macOS** (в том числе Apple Silicon) и на других платформах без WinAPI  
* Код, который работает через `user32.dll` и WinAPI, закрыт препроцессорными директивами и не выполняется вне Windows  
* Кнопки окна, которые не имеют смысла в WebGL и на Mac, отключены в интерфейсе, чтобы не путать игрока  

### Графика и рендер

* Исправлены тонкие линии на тайлмапе, которые появлялись при слишком большом или маленьком разрешении, особенно в WebGL  
* Для платформ без WinAPI добавлена фоновая камера, буфер заливается черным цветом и по краям больше нет розовых артефактов  
* Подправлены настройки `PixelPerfectCamera` и Canvas, чтобы игровое поле оставалось аккуратным квадратом и не ломалось при нестандартных соотношениях сторон  
* Прогресс бары врагов теперь корректно следуют за ними в WebGL и при растягивании окна  
* У иконок UI включен `Preserve Aspect`, чтобы спрайты не растягивались  
* У текстовых компонентов отключен `Raycast Target`, чтобы они не перекрывали клики по кнопкам  

### Обучение и удобство

* В обучающем слайде с A и D исправлено направление управления, раньше оно выглядело инверсно по отношению к реальным клавишам  
* Обучение стало легче читать  
  * добавлена небольшая анимация спрайтов подсказок через компонент `UiImageScaleAnimator`  
  * первая подсказка при желании зеркалится, чтобы направление выглядело логичнее  
  * основная UI панель плавно проявляется после завершения обучения с помощью анимированного `CanvasGroup`  

### Инфраструктура и разработка

* Добавлен внутренний чит для сброса прогресса, чтобы быстро стартовать игру с чистого состояния  
  * очищаются не только `PlayerPrefs`, но и сохранения в `Application.persistentDataPath`  
* В редакторе Unity можно удалить локальный прогресс одним действием, что упрощает отладку  
* Удалены лишние зависимости из проекта, заодно уменьшен размер сборки  
* Написан кастомный WebGL шаблон `ROLL'EMMinimal`  
  * шаблон лежит в каталоге `Assets/WebGLTemplates/ROLL'EMMinimal`  
  * фон страницы использует тайловый `Background.png`  
  * добавлены иконка игры и логотип загрузчика `game-logo.png`  
  * есть отдельная кнопка перехода в полноэкранный режим  
  * размер канваса в браузере подстраивается под меньшую сторону окна, чтобы игра визуально оставалась квадратной, как задумывал автор  

---

## Стиль кода и структура изменений

* В новых скриптах я старался придерживаться стиля кода, который использует foX_Void  
  * те же соглашения по именованию  
  * явные типы вместо `var`, где это использовано в оригинальном проекте  
* Практически все добавленные скрипты лежат в папке  
  `Assets/Scripts/_Common/`  
* Исключение — небольшой вспомогательный класс `CanvasGroupFadeUtility`, который расположен в файле  
  `Assets/Scripts/UI/LearningControlls.cs`  
* Для WebGL используется отдельный шаблон  
  `Assets/WebGLTemplates/ROLL'EMMinimal`  
* Из дополнительных зависимостей добавлено только то, что нужно для комфортной работы в IDE, остальная структура проекта автора не трогалась  
* Все изменения можно посмотреть по истории коммитов этого форка, там видно, что правки минимальны и точечны  

---

## Управление

Здесь дублирую управление как в оригинальной версии от foX_Void.

* **A / D** вращение бревна против и по часовой стрелке  
* **Q** быстрая починка башни  
* **W + ЛКМ** быстрое использование зелья  
* **E** быстрая починка бревна  

---

## Сборка проекта

Кратко по шагам.

1. Открыть проект в **Unity 6000.1.17f1** или совместимой версии ветки 6000.1  
2. Выбрать нужную платформу в Build Settings  
   * `WebGL` для браузерной версии  
   * `Windows`, `macOS` или `Linux` для десктопа  
3. Для WebGL  
   * в Build Settings выбрать шаблон `ROLL'EMMinimal` из папки `Assets/WebGLTemplates/ROLL'EMMinimal`  
   * собрать билд и выложить содержимое папок `Build` и `TemplateData` на хостинг вроде GitHub Pages, где `index.html` это подготовленный шаблон  
4. Для Windows WinAPI-функции вроде хромакейного окна и рамки работают так же, как в оригинальном проекте  

---

## Автор форка

**RimuruDev**  

* GitHub  
  https://github.com/RimuruDev  

* Почта  
  rimuru.dev@gmail.com  

Форк сделан из уважения к работе foX_Void и для тех, кто хочет поиграть в roll'em без доступа к Windows.  
Если вы оригинальный автор и хотите, чтобы форк был изменен, переименован или удален, напишите мне любым удобным способом.

---

## Скриншоты

<img width="966" height="656" alt="изображение" src="https://github.com/user-attachments/assets/ccb3c827-859c-4744-b388-82f5df9ebe7b" />
<img width="791" height="713" alt="изображение" src="https://github.com/user-attachments/assets/1b1694fb-5054-4799-9f78-e83d5d4e5942" />
<img width="751" height="712" alt="изображение" src="https://github.com/user-attachments/assets/c7d42622-4273-4f48-b186-31a81dc4280e" />
<img width="744" height="707" alt="изображение" src="https://github.com/user-attachments/assets/4c4c4ce3-501a-49f8-9615-aa507bdf5353" />
<img width="748" height="712" alt="изображение" src="https://github.com/user-attachments/assets/b8bdaa10-cfa5-4bc5-8f95-48dd49484e48" />
<img width="749" height="710" alt="изображение" src="https://github.com/user-attachments/assets/08c4dda8-dc5a-47a0-89b5-616f59128176" />
<img width="733" height="712" alt="изображение" src="https://github.com/user-attachments/assets/ee23d9db-3a8f-4efe-b7ef-392314e559fb" />
<img width="723" height="722" alt="изображение" src="https://github.com/user-attachments/assets/bdf016a5-f3f3-4115-b96d-c97140dda63f" />

---

## Дисклеймер

Все права на оригинальный код, арт и концепцию **roll'em** принадлежат **foX_Void FoxLight Games**.  
Этот репозиторий фанатский технический порт и распространяется для ознакомительных и образовательных целей.  
Ассеты из игры не стоит использовать в сторонних коммерческих проектах без явного разрешения оригинального автора.
